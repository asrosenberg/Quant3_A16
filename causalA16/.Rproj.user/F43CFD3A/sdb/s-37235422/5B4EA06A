{
    "collab_server" : "",
    "contents" : "# ' Simulate a binary valued potential outcomes model\n#'\n#' Makes binary causal states and binary valued potential outcomes.\n#' @param n number of observations\n#' @param seed RNG seed\n#' @return data.table with potential outcomes\n#' @import data.table\n#' @export\nsimulate_potential_outcomes <- function(n,\n  seed = sample.int(.Machine$integer.max, 1))\n{\n  set.seed(seed)\n  prob_y1 <- .7\n  prob_y0 <- .3\n  DATA <- data.table(\n    y0 = 1 * (runif(n) < prob_y0),\n    y1 = 1 * (runif(n) < prob_y1))\n  attr(DATA, \"seed\") <- seed\n  DATA\n}\n\n# ' Simulate a Simple Experiment\n#'\n#' Simulates potential outcomes and adds a treatment variable,\n#' assumes SUTVA, defines the observed outcomes, deletes potential outcomes, and\n#' defines a result.\n#' @param n number of observations\n#' @param seed RNG seed\n#' @param prob_treatment probability of treatment\n#' @return data.table with experiment data\n#' @import data.table\n#' @export\nsimulate_simple_experiment <- function(n, prob_treatment = 0.5,\n  seed = sample.int(.Machine$integer.max, 1))\n{\n  set.seed(seed)\n  DATA <- simulate_potential_outcomes(n)\n  DATA[, prob_treatment := prob_treatment]\n  DATA[, d := 1 * (runif(n) < prob_treatment)]\n  DATA[, y := d * y1 + (1 - d) * y0]\n  DATA[, `:=`(y1 = NULL, y0 = NULL)]\n  attr(DATA, \"seed\") <- seed\n  DATA\n}\n\n# ' Simulate an observational study\n#'\n#' Simulates potential outcomes and adds a treatment variable,\n#' assumes SUTVA, defines the observed outcomes, deletes potential outcomes, and\n#' defines a result.\n#' @param n number of observations\n#' @param seed RNG seed\n#' @return data.table with simulated observational study\n#' @import data.table\n#' @export\nsimulate_observational_study <- function(n, prob_treatment = 0.5,\n  seed = sample.int(.Machine$integer.max, 1))\n{\n  set.seed(seed)\n  DATA <- simulate_potential_outcomes(n)\n  DATA[, prob_d_equals_1 := plogis(-2 + 4 * (y1 - y0))]\n  DATA[, d := 1 * (runif(n) < prob_d_equals_1)]\n  DATA[, y := d * y1 + (1 - d) * y0]\n  DATA[, `:=`(y1 = NULL, y0 = NULL, prob_d_equals_1 = NULL)]\n  attr(DATA, \"seed\") <- seed\n  DATA\n}\n\n# ' Calculate naive difference in means\n#'\n#' Calculates the naive difference in means\n#' @param DATA a dataset\n#' @return number\n#' @import data.table\n#' @export\ncalculate_naive_difference_in_means <- function(DATA)\n{\n  DATA[, mean(y[d == 1]) - mean(y[d == 0])]\n}\n",
    "created" : 1472600623162.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "69985223",
    "id" : "5B4EA06A",
    "lastKnownWriteTime" : 1472591963,
    "last_content_update" : 1472591963,
    "path" : "~/Dropbox/Archive/Teaching/Quant3_AU16_not_shared/causalA16/R/potential-outcomes.R",
    "project_path" : "R/potential-outcomes.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}